---
title: 'ë¹Œë“œ í™˜ê²½ êµ¬ì¶• with Webpack'
date: '2022-10-26'
slug: 'build-setting-with-webpack'
tags: ['Performance', 'Webpack']
hero_image: './ë¹Œë“œ_í™˜ê²½_êµ¬ì¶•_with_Webpack_íˆì–´ë¡œ_ì´ë¯¸ì§€.jpeg'
hero_image_alt: 'ë¹Œë“œ í™˜ê²½ êµ¬ì¶• with Webpack íˆì–´ë¡œ ì´ë¯¸ì§€'
---
import { MDXImageWrapper, ToggleList } from 'components';

# ë“¤ì–´ê°€ë©°

í”„ë¡œì íŠ¸ ë¹Œë“œ í™˜ê²½ì„ ì§ì ‘ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ì˜µì…˜ì„ ê³µë¶€í•˜ê³  ì ìš©í–ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” ìŠ¤ëª¨ë”” í”„ë¡œì íŠ¸ì— ì‚¬ìš©ëœ webpack ë¹Œë“œ ì˜µì…˜ì„ ì •ë¦¬í•˜ë ¤ í•œë‹¤.

<br/>

# Webpack í™˜ê²½ ì„¤ì •

ìŠ¤ëª¨ë”” 4.2.1 ë²„ì „ ê¸°ì¤€ webpack ì„¤ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

<ToggleList summary="webpack.config.js">
  ```jsx
    const webpack = require('webpack');
    const HtmlWebpackPlugin = require('html-webpack-plugin');
    const CopyWebpackPlugin = require('copy-webpack-plugin');
    const path = require('path');
    const isProd = process.env.NODE_ENV === 'production';
    const isLocal = process.env.NODE_ENV === 'local';
    const dotenv = require('dotenv');
    const { ESBuildMinifyPlugin } = require('esbuild-loader');
    
    dotenv.config({ path: '.env' });
    
    module.exports = {
      mode: isProd ? 'production' : 'development',
      devtool: isProd ? false : 'eval',
      performance: {
        hints: false,
      },
      entry: './src/index.tsx',
      output: {
        publicPath: '/',
        path: path.join(__dirname, '/dist'),
        filename: 'bundle.[chunkhash].js',
        clean: true,
      },
      resolve: {
        extensions: ['.js', '.jsx', '.ts', '.tsx'],
        modules: [path.resolve(__dirname, 'src'), 'node_modules'], // node_modules/ë³´ë‹¤ ìš°ì„ ìœ¼ë¡œ ê²€ìƒ‰í•  ë””ë ‰í„°ë¦¬ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
      },
      module: {
        rules: [
          {
            test: /\.(js|jsx|ts|tsx)$/i,
            exclude: /node_modules/,
            loader: 'esbuild-loader',
            options: {
              loader: 'tsx',
              target: 'es2020',
            },
          },
          {
            test: /\.(png|webp)$/,
            type: 'asset',
            generator: {
              filename: 'assets/[name][hash][ext]',
            },
          },
          // CRAì—ì„œëŠ” svgë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ì§€ë§Œ, CRAë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš° webpack configë¥¼ í†µí•œ ì‚¬ìš© ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.
          {
            test: /\.svg$/,
            use: ['@svgr/webpack'],
          },
        ],
      },
      devServer: {
        historyApiFallback: true,
        port: 3000,
        hot: true,
        open: true,
      },
      optimization: {
        splitChunks: {
          chunks: 'all',
        },
        minimizer: [
          '...',
          new ESBuildMinifyPlugin({
            target: 'es2020'
          }),
        ],
      },
      plugins: [
        new webpack.ProvidePlugin({
          React: 'react',
        }),
        new HtmlWebpackPlugin({
          template: './public/index.html',
        }),
        new webpack.HotModuleReplacementPlugin(),
        new webpack.DefinePlugin({
          'process.env.BASE_URL': JSON.stringify(
            isProd ? process.env.PROD_BASE_URL : process.env.DEV_BASE_URL,
          ),
          'process.env.CLIENT_ID': isProd ? undefined : JSON.stringify(process.env.CLIENT_ID),
          'process.env.PUBLIC_KEY': isProd
            ? undefined
            : JSON.stringify(process.env.PUBLIC_KEY),
          'process.env.IS_LOCAL': JSON.stringify(isLocal),
        }),
        new CopyWebpackPlugin({
          patterns: [
            { from: 'public/image', to: 'image' },
            { from: 'public/manifest.json', to: '.' },
            { from: 'public/pwaServiceWorker.js', to: '.' },
          ],
        }),
      ],
    };
  ```
</ToggleList>

<br/>

# devtoolì€ ì™œ ì´ë ‡ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

```jsx
devtool: isProd ? false : 'eval-cheap-module-source-map',
```

<br/>

ê°œë°œëª¨ë“œì—ì„œ ì›í™œí•œ ë””ë²„ê¹…ì„ ìœ„í•´ ì†ŒìŠ¤ë§µì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.

ğŸ’¡Â ì†ŒìŠ¤ ë§µ(Source Map)ì´ë€ ë°°í¬ìš©ìœ¼ë¡œ ë¹Œë“œí•œ íŒŒì¼ê³¼ ì›ë³¸ íŒŒì¼ì„ ì„œë¡œ ì—°ê²°ì‹œì¼œì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.

webpackì„ ì‚¬ìš©í•´ ë²ˆë“¤ë§í•œ ì½”ë“œë¡œë¶€í„° ì†ŒìŠ¤ ì½”ë“œë¥¼ ìœ ì¶”í•˜ëŠ”ê±´ ë„ˆë¬´ë‚˜ ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì— ê°œë°œí•˜ëŠ” ì½”ë“œì™€ ë²ˆë“¤ë§ëœ ì½”ë“œë¥¼ ì—°ê²°í•˜ëŠ” Source Mapì„ ì‚¬ìš©í•œë‹¤.

<br/>

**source-map ìˆëŠ” ê²½ìš°**

<MDXImageWrapper caption="source-map ìˆëŠ” ê²½ìš° ì½”ë“œ">
  ![source-map ìˆëŠ” ê²½ìš° ì½”ë“œ](./source-map_ìˆëŠ”_ê²½ìš°_ì½”ë“œ.png)
</MDXImageWrapper>

<br/>

**source-map ì—†ëŠ” ê²½ìš°**

<MDXImageWrapper caption="source-map ì—†ëŠ” ê²½ìš° ì½”ë“œ">
  ![source-map ì—†ëŠ” ê²½ìš° ì½”ë“œ](./source-map_ì—†ëŠ”_ê²½ìš°_ì½”ë“œ.png)
</MDXImageWrapper>

<br/>

ì—¬ëŸ¬ ì†ŒìŠ¤ë§µ ì˜µì…˜ ì¤‘ **eval-cheap-module-source-map**ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤. í•´ë‹¹ ì˜µì…˜ì€ ì•„ë˜ì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

1. ë””ë²„ê¹…ì„ í•  ë•Œ ì½”ë“œì˜ ë¼ì¸ì„ ë³´ì¡´í•´ì•¼ ì—ëŸ¬ ìœ„ì¹˜ë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.
2. ë¹Œë“œì™€ ë¦¬ë¹Œë“œ ì†ë„ê°€ ë¹¨ë¼ì•¼í•œë‹¤.

<br/>

ì½”ë“œ í’ˆì§ˆìì²´ëŠ” ìœ ì˜ë¯¸í•œ ì°¨ì´ê°€ ë‚˜ì§€ ì•Šì•˜ë‹¤.

í•˜ì§€ë§Œ eval-cheap-module-source-mapì´ ë” ë¹Œë“œê°€ ë¹ ë¥´ê²Œ ë˜ê³ 

ì´ëŠ” ê°œë°œ ì¤‘ ì¼ì–´ë‚˜ëŠ” ë§ì€ ë¹Œë“œì™€ í•˜ë“œì›¨ì–´ ìƒíƒœì— ë”°ë¼ ìœ ì˜ë¯¸í•œ ì°¨ì´ë¥¼ ì´ëŒì–´ ë‚¼ ê²ƒ ê°™ì•„ì„œ ë‹¤ìŒì˜ ì˜µì…˜ìœ¼ë¡œ ì„ íƒí–ˆë‹¤.

<br/>

**source-map ì‚¬ìš© ì˜ˆì‹œ**

<MDXImageWrapper caption="source-map á„‰á…¡á„‹á…­á†¼ á„‹á…¨á„‰á…µ">
  ![source-map á„‰á…¡á„‹á…­á†¼ á„‹á…¨á„‰á…µ](./source-map_ì‚¬ìš©_ì˜ˆì‹œ.png)
</MDXImageWrapper>

<br/>

**eval-cheap-module-source-map ì‚¬ìš© ì˜ˆì‹œ**

<MDXImageWrapper caption="eval-cheap-module-source-map á„‰á…¡á„‹á…­á†¼ á„‹á…¨á„‰á…µ">
  ![eval-cheap-module-source-map á„‰á…¡á„‹á…­á†¼ á„‹á…¨á„‰á…µ](./eval-cheap-module-source-map_ì‚¬ìš©_ì˜ˆì‹œ.png)
</MDXImageWrapper>

<br/>

**ì°¸ê³  ìë£Œ**

[https://webpack.kr/configuration/devtool/](https://webpack.kr/configuration/devtool/)

<br/>

# ouputì€ ì™œ ì´ë ‡ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

```jsx
output: {
  ...
	publicPath: '/',
  filename: 'bundle.[chunkhash].js',
  ...
},
```

## publicPath

publicPathëŠ” ì‹¤ì œ ë¸Œë¼ìš°ì €ì—ì„œ ë¹Œë“œëœ íŒŒì¼ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ pathì´ë‹¤. ë”°ë¼ì„œ `/`ë§Œì„ ì§€ì •í•´ì„œ serverì˜ host ì£¼ì†Œë§Œ ì…ë ¥í•´ë„ ë²ˆë“¤ëœ ë””ë ‰í„°ë¦¬ì˜ index.htmlì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í–ˆë‹¤.

<br/>

## filenameì˜ hashê°’

filenameì˜ ê²½ìš° chunkHashë¥¼ ì‚¬ìš©í•´ì„œ hash ê°’ì„ ìƒì„±í–ˆë‹¤. hash ê°’ì˜ ê²½ìš° ìºì‹œ ë²„ìŠ¤íŒ…(cach bursting)íš¨ê³¼ë¥¼ ìœ„í•´ ì‚¬ìš©í–ˆë‹¤.

<br/>

### contentHash ëŒ€ì‹  chunkHashë¥¼ ì‚¬ìš©í•œ ì´ìœ 

contentHash ëŒ€ì‹  chunkHashë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ” í”„ë¡œì íŠ¸ì—ì„œ styeld-componetnsì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤. stsyled-componetnsëŠ” CSS in JS  ë°©ì‹ì´ë‹¤. ë”°ë¼ì„œ CSS íŒŒì¼ì´ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤. ë•Œë¬¸ì— ìŠ¤íƒ€ì¼ê³¼ ê´€ë ¨ ì—†ëŠ” JS ì½”ë“œë§Œ ë³€ê²½í–ˆì„ ë•Œ ê¸°ì¡´ì˜ css íŒŒì¼ì˜ í•´ì‹œ ê°’ì´ ìœ ì§€ë˜ë˜ contentHashì˜ ì´ì ì´ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŸ° ì´ìœ ë¡œ contentHash ëŒ€ì‹  chunkHashë¥¼ ì‚¬ìš©í–ˆë‹¤.

<br/>

**ì°¸ê³  ìë£Œ**

[https://webpack.kr/configuration/output/](https://webpack.kr/configuration/output/)

[https://stackoverflow.com/a/59197260](https://stackoverflow.com/a/59197260)

<br/>

# resolveëŠ” ì™œ ì´ë ‡ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

```jsx
resolve: {
  extensions: ['.js', '.jsx', '.ts', '.tsx'],
  modules: [path.resolve(__dirname, 'src'), 'node_modules'], // node_modules/ë³´ë‹¤ ìš°ì„ ìœ¼ë¡œ ê²€ìƒ‰í•  ë””ë ‰í„°ë¦¬ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
}
```

<br/>

## extensions

extensions ì˜µì…˜ì— í™•ì¥ì ëª©ë¡ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ì„¤ì •ëœ í™•ì¥ìì— í•´ë‹¹ë˜ëŠ” íŒŒì¼ë“¤ì€ import í•  ë•Œ íŒŒì¼ í™•ì¥ìë¥¼ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ëœë‹¤. ì´ì™€ ê°™ì€ í¸ë¦¬í•¨ ë•Œë¬¸ì— extensions ì˜µì…˜ì„ ì„¤ì •í–ˆë‹¤.

<br/>

## modules

modules ì˜µì…˜ì€ ëª¨ë“ˆì„ ê²€ìƒ‰í•  ë””ë ‰í„°ë¦¬ ëª©ë¡ì„ ì„¤ì •í•˜ëŠ” ì˜µì…˜ì´ë‹¤. ëª©ë¡ì˜ ì•ì— ìˆëŠ” ê²½ë¡œë¶€í„° ëª¨ë“ˆì„ íƒìƒ‰í•œë‹¤. node_modules ë³´ë‹¤ srcë¥¼ ë¨¼ì € íƒìƒ‰í•˜ê¸° ìœ„í•´ srcë¥¼ ë°°ì—´ì˜ ì²« ë²ˆì§¸ ìš”ì†Œë¡œ ì§€ì •í–ˆë‹¤.

<br/>

**ì°¸ê³  ìë£Œ**

[https://webpack.kr/configuration/resolve/](https://webpack.kr/configuration/resolve/)

<br/>

# moduleì˜ rulesëŠ” ì™œ ì´ë ‡ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

## ts ë° tsx ì²˜ë¦¬ ë°©ë²•

```jsx
{
  test: /\.(js|jsx|ts|tsx)$/i,
  exclude: /node_modules/,
  loader: 'esbuild-loader',
  options: {
    loader: 'tsx',
    target: 'es2020',
  },
},
```

### ì°¸ê³  ìë£Œ

[babel-loaderì™€ ts-loader ê·¸ë¦¬ê³  esbuild-loader](babel-loader%E1%84%8B%E1%85%AA%20ts-loader%20%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%84%80%E1%85%A9%20esbuild-loader%20429b4e709cc24529a87254645a0d2d5a.md)

<br/>

## png ë° webp ì²˜ë¦¬ ë°©ë²•

```jsx
{
  test: /\.(png|webp)$/,
  type: 'asset',
  generator: {
    filename: 'assets/[name][hash][ext]',
  },
},
```

webpack5 ì´í›„ë¶€í„°ëŠ” ë³„ë„ì˜ loader ì—†ì´ asset íŒŒì¼(fonts, icons, etc)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br/>

webpack 5 ì´í›„ ë„ì…ëœÂ `Asset Modules`Â íƒ€ì…ì€ 4ê°œì˜ ìƒˆ ëª¨ë“ˆ íƒ€ì…ë“¤ì´ ìˆë‹¤.

- `asset/source`Â : assetì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ exportí•œë‹¤.Â `raw-loader`Â ë¥¼ ëŒ€ì²´í•œë‹¤.
- `asset/inline`Â : assetì˜ data URIë¥¼ exportí•œë‹¤.Â `url-loader`Â ë¥¼ ëŒ€ì²´í•œë‹¤.
- `asset/resource`Â : ê°ê°ì˜ íŒŒì¼ì„ emití•˜ê³  URLì„ exportí•œë‹¤.Â `file-loader`Â ë¥¼ ëŒ€ì²´í•œë‹¤.
- `asset`Â : data URIë¥¼ exportí• ì§€ ê°ê°ì˜ íŒŒì¼ì„ emití•  ì§€ ìë™ìœ¼ë¡œ ì„ íƒí•œë‹¤. asset size limitì´ ìˆëŠ”Â `url-loader`Â ë¥¼ ëŒ€ì²´í•œë‹¤.

<br/>

ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ìˆë‹¤.

- íŒŒì¼ì„ output ë””ë ‰í„°ë¦¬ì— íŒŒì¼ì„ emití•˜ê³  URLë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹
- data URLì„ inlineìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹

<br/>

data URLì˜ ê²½ìš° ì„±ëŠ¥ìƒ ì¢‹ì§„ì•Šì§€ë§Œ, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì˜ ìˆ˜ê°€ ì¤„ì–´ë“ ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ë”°ë¼ì„œ í¬ê¸°ê°€ ì‘ì€ ì´ë¯¸ì§€ì˜ ê²½ìš° data URLì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ì„ íƒì¼ ìˆ˜ ìˆë‹¤.

<br/>

ë”°ë¼ì„œ ì´ë¯¸ì§€ í¬ê¸°ì— ë”°ë¼ ë‘ ë°©ì‹ì„ ì ì ˆí•˜ê²Œ í˜¼ìš©í•´ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì´ë¯¸ì§€ ì²˜ë¦¬ ë°©ë²•ì„ Asset Modulesì˜ typeì„ **asset**ìœ¼ë¡œ ê²°ì •í–ˆë‹¤.

<br/>

**ì°¸ê³ ìë£Œ**

[https://webpack.js.org/guides/asset-modules/](https://webpack.js.org/guides/asset-modules/)

<br/>

## svg íŒŒì¼ ì²˜ë¦¬ ë°©ë²•

```jsx
{
  test: /\.svg$/,
  use: ['@svgr/webpack'],
},
```

í”„ë¡œì íŠ¸ ì•ˆì—ì„œ svg ì´ë¯¸ì§€ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤. `@svgr/webpack` ì€ svg ì´ë¯¸ì§€ë¥¼ importí•œ í›„ React ì»´í¬ë„ŒíŠ¸ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ë”°ë¼ì„œ í¸ë¦¬í•˜ê²Œ svg ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•´ë‹¹ ë¡œë”ë¥¼ ì‚¬ìš©í–ˆë‹¤.

<br/>

**ì°¸ê³ ìë£Œ**

[https://react-svgr.com/docs/webpack/](https://react-svgr.com/docs/webpack/)

<br/>

# devServerëŠ” ì™œ ì´ë ‡ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

```jsx
devServer: {
  historyApiFallback: true,
  port: 3000,
  hot: true,
  open: true,
},
```

<br/>

### historyApiFallback

React Router DOM ë‚´ë¶€ì ìœ¼ë¡œ HTML HistoryAPIê°€ ì‚¬ìš©ë˜ê³  ìˆë‹¤

HTML HistoryAPIë¥¼ ì‚¬ìš©í•  ë•Œ, index.html í˜ì´ì§€ëŠ” 404 ì‘ë‹µ ëŒ€ì‹  ì œê³µë˜ì–´ì•¼í•¨ìœ¼ë¡œ trueë¡œ ì„¤ì •í•˜ì—¬ ìƒˆë¡œê³ ì¹¨í•´ë„ ê¸°ì¡´ í˜ì´ì§€ê°€ ë‚˜ì˜¤ë„ë¡ ì„¤ì •í•˜ì˜€ë‹¤.

<br/>

**ì°¸ê³ ìë£Œ**

[https://webpack.kr/configuration/dev-server/#devserverhistoryapifallback](https://webpack.kr/configuration/dev-server/#devserverhistoryapifallback)

[https://basemenks.tistory.com/270](https://basemenks.tistory.com/270)

<br/>

# optimizationì€ ì™œ ì´ë ‡ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

```jsx
optimization: {
    splitChunks: {
      chunks: 'all',
    },
    minimizer: [
      '...',
      new ESBuildMinifyPlugin({
        target: 'es2020',
        css: true,
      }),
    ],
  },
```

## splitChunks

### chunkë€?

yceffortë‹˜ì— ì˜í•˜ë©´ chunkëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

> ***ì›¹íŒ©ì—ì„œ, ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ê°ê° ë‹¤ë¥¸ íŒŒì¼ë¡œ ë‚˜ëˆˆê²ƒì„Â `chunk`ë¼ê³  ë¶€ë¥¸ë‹¤***
> 

<br/>

### splitChunks.chunksë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ íš¨ê³¼ê°€ ìˆëŠ”ê°€?

splitChunks.chunksë¥¼ ì‚¬ìš©í•˜ë©´ chunks ê°„ì— ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì½”ë“œë¥¼ ì¶”ì¶œí•´ì„œ ìƒˆë¡œìš´ chunkë¡œ ë§Œë“ ë‹¤.

ë”°ë¼ì„œ ë¹Œë“œëœ íŒŒì¼ì˜ ìš©ëŸ‰ì„ ê°ì†Œì‹œí‚¤ëŠ” íš¨ê³¼ê°€ ìˆë‹¤.

<br/>

ì‹¤ì œë¡œ splitChunks.chunks ì˜µì…˜ì˜ ì ìš© ì „í›„ ë¹„êµí•œ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<br/>

**splitChunks.chunks ì ìš© ì „**

ì´ chunk ìš©ëŸ‰: 353.34KB

ì´ chunk ê°œìˆ˜: 25ê°œ

<MDXImageWrapper caption="splitChunk á„Œá…¥á†¨á„‹á…­á†¼ á„Œá…¥á†« gzip">
  ![splitChunk á„Œá…¥á†¨á„‹á…­á†¼ á„Œá…¥á†« gzip](./splitChunk_ì „_gzip.png)
</MDXImageWrapper>

<br/>

**splitChunks.chunks ì ìš© í›„**

ì´ chunk ìš©ëŸ‰: 352.33KB

ì´ chunk ê°œìˆ˜: 26ê°œ

<MDXImageWrapper caption="splitChunk á„Œá…¥á†¨á„‹á…­á†¼ á„’á…® gzip">
  ![splitChunk á„Œá…¥á†¨á„‹á…­á†¼ á„’á…® gzip](./splitChunk_í›„_gzip.png)
</MDXImageWrapper>

<br/>

íš¨ê³¼ê°€ í¬ì§„ ì•Šì§€ë§Œ, ìš©ëŸ‰ ê°ì†Œê°€ ìˆëŠ” ê²ƒì´ í™•ì¸ë¼ì„œ í•´ë‹¹ ì˜µì…˜ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.

ë˜í•œ webpack ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ splitChunks.all ì˜µì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ëœë‹¤.

> ProvidingÂ `all`Â can be particularly powerful, because it means that chunks can be shared even between async and non-async chunks.
> 

<br/>

ë”°ë¼ì„œ splitChunks.chunks ì˜µì…˜ì„ allë¡œ ì§€ì •í–ˆë‹¤.

<br/>

**ì°¸ê³ ìë£Œ**

[https://webpack.js.org/plugins/split-chunks-plugin/#splitchunkschunks](https://webpack.js.org/plugins/split-chunks-plugin/#splitchunkschunks)

[https://yceffort.kr/2020/07/make-use-of-long-term-caching](https://yceffort.kr/2020/07/make-use-of-long-term-caching)

[https://hoilzz.github.io/webpack/6-code-split/](https://hoilzz.github.io/webpack/6-code-split/)

[https://helloinyong.tistory.com/307](https://helloinyong.tistory.com/307)

<br/>

## minimizer

```jsx
 minimizer: [
  '...',
  new ESBuildMinifyPlugin({
    target: 'es2020',
  }),
],
```

<br/>

minimizer ì†ì„±ìœ¼ë¡œ ìµœì í™”í•  ë•Œ ì ìš©ë˜ëŠ” pluginì„ ì¬ì •ì˜ í•  ë•Œ, `â€˜â€¦â€™`ì„ ê°™ì´ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ì— defaultë¡œ ì ìš©ë˜ë˜ pluginë„ ê°™ì´ ì ìš©í•  ìˆ˜ ìˆë‹¤. ê¸°ë³¸ìœ¼ë¡œ ì ìš©ë˜ëŠ” ìµœì í™” pluginì„ í•¨ê»˜ ì ìš©í•˜ê¸° ìœ„í•´ `â€˜â€¦â€™` ì‚¬ìš©í–ˆë‹¤.

<br/>

esbuild-loaderë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë¡œë”ì— ë§ëŠ” ìµœì í™” í”ŒëŸ¬ê·¸ì¸ì¸ ESBuildMinifyPluginì„ ì‚¬ìš©í–ˆë‹¤.

ê°™ì€ ì´ì¹˜ë¡œ target ë˜í•œ esbuild-loaderì™€ ê°™ê²Œ ì„¤ì •í–ˆë‹¤.(ì¼ë‹¨ ë³´ë¥˜, ì´ í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©í•˜ë˜ ì•ˆí•˜ë˜ ë²ˆë“¤ í¬ê¸°ì— ì•„ë¬´ëŸ° ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.)

<br/>

**ì°¸ê³  ìë£Œ**

[https://webpack.kr/configuration/optimization/#optimizationminimizer](https://webpack.kr/configuration/optimization/#optimizationminimizer)

<br/>

# pluginsëŠ” ì™œ ì´ë ‡ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

```jsx
plugins: [
  new webpack.ProvidePlugin({
    React: 'react',
  }),
  new HtmlWebpackPlugin({
    template: './public/index.html',
  }),
  new webpack.HotModuleReplacementPlugin(),
  new webpack.DefinePlugin({
    'process.env.BASE_URL': JSON.stringify(
      isProd ? process.env.PROD_BASE_URL : process.env.DEV_BASE_URL,
    ),
    'process.env.CLIENT_ID': isProd ? undefined : JSON.stringify(process.env.CLIENT_ID),
    'process.env.PUBLIC_KEY': isProd
      ? undefined
      : JSON.stringify(process.env.PUBLIC_KEY),
    'process.env.IS_LOCAL': JSON.stringify(isLocal),
  }),
  new CopyWebpackPlugin({
    patterns: [
      { from: 'public/image', to: 'image' },
      { from: 'public/manifest.json', to: '.' },
      { from: 'public/pwaServiceWorker.js', to: '.' },
    ],
  }),
  new BundleAnalyzerPlugin(),
],
```

<br/>

## webpack.ProvidePlugin

ë¶ˆí•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ì´ë¼ ì‚­ì œ! í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì€ ìë™ìœ¼ë¡œ ëª¨ë“ˆì„ import í•´ì£¼ëŠ” ì½”ë“œë¥¼ ì‚½ì…í•´ì¤€ë‹¤.

<br/>

**ì°¸ê³  ìë£Œ**

[https://velog.io/@arara90/webpack-3.-í”ŒëŸ¬ê·¸ì¸Plugin-ì‚¬ìš©í•˜ê¸°#provideplugin](https://velog.io/@arara90/webpack-3.-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8Plugin-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0#provideplugin)

<br/>

## HtmlWebpackPlugin

ë²ˆë“¤ ë””ë ‰í„°ë¦¬ì— HTMLì„ ìƒì„±í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤. template ì˜µì…˜ì„ ì‚¬ìš©í•´ì„œ `public/index.html`ì„ í…œí”Œë¦¿ìœ¼ë¡œ í•˜ì—¬ ë²ˆë“¤ëœ ê²°ê³¼ì— index.htmlì„ ìƒì„±í•˜ì˜€ë‹¤.

<br/>

**ì°¸ê³  ìë£Œ**

[https://yamoo9.gitbook.io/webpack/webpack/webpack-plugins/automatic-injection-to-html-document](https://yamoo9.gitbook.io/webpack/webpack/webpack-plugins/automatic-injection-to-html-document)

<br/>

## webpack.HotModuleReplacementPlugin

devserverì˜ hot ì˜µì…˜ì´ ìˆìœ¼ë©´ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì€ í•„ìš”í•˜ì§€ ì•Šë‹¤. ë”°ë¼ì„œ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì„ ì œê±°í–ˆë‹¤.

<br/>

**ì°¸ê³  ìë£Œ**

[https://webpack.kr/configuration/dev-server/#devserverhot](https://webpack.kr/configuration/dev-server/#devserverhot)

<br/>

## webpack.DefinePlugin

ì½”ë“œì— ì „ì—­ ìƒìˆ˜ë¥¼ ì£¼ì…í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤. ì½”ë“œ ì‹¤í–‰ í™˜ê²½ì— ëŒ€í•œ ì •ë³´ ë˜ëŠ” `.env` íŒŒì¼ì— ìˆëŠ” ì •ë³´ë¥¼ ì£¼ì…í•˜ê¸° ìœ„í•´ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í–ˆë‹¤.

<br/>

### EnvironmentPlugin ëŒ€ì‹  DefinePluginì„ ì‚¬ìš©í•œ ì´ìœ 

EnvironmentPluginì„ ì‚¬ìš©í•˜ë©´ í™˜ê²½ ë³€ìˆ˜ì— ëŒ€í•œ ì „ì—­ ìƒìˆ˜ë¥¼ ì£¼ì… ê°€ëŠ¥í•˜ë‹¤. ë°˜ë©´ì—, DefinePluginì€ í™˜ê²½ ë³€ìˆ˜ ë¿ë§Œ ì•„ë‹ˆë¼ ì¼ë°˜ ì „ì—­ ìƒìˆ˜ë„ ì£¼ì…ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ëŸ° ë²”ìš©ì ì¸ ì¸¡ë©´ì„ ê³ ë ¤í•´ì„œ DefinePluginì„ ì‚¬ìš©í•˜ê²Œëë‹¤.

<br/>

**ì°¸ê³  ìë£Œ**

[https://www.daleseo.com/webpack-plugins-define-environment/](https://www.daleseo.com/webpack-plugins-define-environment/)

## CopyWebpackPlugin

íŠ¹ì • íŒŒì¼ì„ ë²ˆë“¤ í´ë”ì— ì£¼ì…í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤. í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì´ë¯¸ì§€, mainfest.json, pwaServiceWorker íŒŒì¼ì„ ì£¼ì…í•˜ê³  ìˆë‹¤.

<br/>

**ì°¸ê³  ìë£Œ**

[https://webpack.js.org/plugins/copy-webpack-plugin/](https://webpack.js.org/plugins/copy-webpack-plugin/)