---
title: '[Webpack] JS íŒŒì¼ í¬ê¸° ì¤„ì´ê¸° with mode, optimization, devtool'
date: '2022-09-13'
slug: 'js-file-minimize-with-webpack-mode-optimization-devtool'
tags: ['Performance', 'Webpack']
hero_image: './assets/[Webpack]_JS_íŒŒì¼_í¬ê¸°_ì¤„ì´ê¸°_with_mode,_optimization,_devtool.jpeg'
hero_image_alt: '[Webpack] JS íŒŒì¼ í¬ê¸° ì¤„ì´ê¸° with mode, optimization, devtool'
---
import { MDXImageWrapper, ToggleList } from 'components';

# ë“¤ì–´ê°€ë©°

ìµœì í™”ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ì˜ í¬ê¸°ë¥¼ ì¤„ì´ëŠ” ë°©ë²•ì´ ìˆë‹¤. ì´ë²ˆ ê²Œì‹œê¸€ì—ì„œëŠ” webpackìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ë²ˆë“¤ë§í•  ë•Œ js íŒŒì¼ì˜ í¬ê¸°ë¥¼ ì¤„ì´ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì •ë¦¬í•˜ë ¤í•œë‹¤.

<br/>

<br/>

<ToggleList summary="webpack ìµœì í™”ë¥¼ ì‹œí‚¤ê¸° ì „ webpack.config.js">
  ```jsx
    const path = require('path');
    const HtmlWebpackPlugin = require('html-webpack-plugin');
    const Dotenv = require('dotenv-webpack');
    const CopyWebpackPlugin = require('copy-webpack-plugin');
    
    module.exports = {
      entry: './src/index.tsx',
      resolve: { extensions: ['.ts', '.tsx', '.js', '.jsx'] },
      output: {
        filename: 'bundle.js',
        path: path.join(__dirname, '/dist'),
        clean: true
      },
      devServer: {
        hot: true,
        open: true,
        historyApiFallback: true
      },
      devtool: 'source-map',
      plugins: [
        new HtmlWebpackPlugin({
          template: './index.html'
        }),
        new CopyWebpackPlugin({
          patterns: [{ from: './public', to: './public' }]
        }),
        new Dotenv()
      ],
      module: {
        rules: [
          {
            test: /\.(js|jsx|ts|tsx)$/i,
            exclude: /node_modules/,
            use: {
              loader: 'ts-loader'
            }
          },
          {
            test: /\.css$/i,
            use: ['style-loader', 'css-loader']
          },
          {
            test: /\.(eot|svg|ttf|woff|woff2|png|jpg|gif)$/i,
            loader: 'file-loader',
            options: {
              name: 'static/[name].[ext]'
            }
          }
        ]
      },
      optimization: {
        minimize: false
      }
    };
  ```
</ToggleList>

<br/>

# mode ì˜µì…˜

webpackì„ ì‹¤í–‰í•  ë•Œ modeì— ë”°ë¼ bundle sizeì˜ í¬ê¸°ê°€ ë‹¬ë¼ì§„ë‹¤.

<br/>

ì•„ë˜ì˜ ë‘ ì‚¬ì§„ì€ ì™¼ìª½ë¶€í„° ê°ê° development ëª¨ë“œë¡œ buildí•œ bundleì˜ í¬ê¸°ì™€ production ëª¨ë“œë¡œ buildí•œ bundle í¬ê¸°ì´ë‹¤.

<MDXImageWrapper caption="á„€á…¢á„‡á…¡á†¯ á„†á…©á„ƒá…³á„…á…© á„‡á…µá†¯á„ƒá…³ á„’á…¢á†»á„‹á…³á†¯ á„„á…¢">
  ![á„€á…¢á„‡á…¡á†¯ á„†á…©á„ƒá…³á„…á…© á„‡á…µá†¯á„ƒá…³ á„’á…¢á†»á„‹á…³á†¯ á„„á…¢](./assets/ê°œë°œ_ëª¨ë“œë¡œ_ë¹Œë“œ_í–ˆì„_ë•Œ.png)
</MDXImageWrapper>

<MDXImageWrapper caption="á„‘á…³á„…á…©á„ƒá…¥á†¨á„‰á…§á†« á„†á…©á„ƒá…³á„…á…© á„‡á…µá†¯á„ƒá…³ á„’á…¢á†»á„‹á…³á†¯ á„„á…¢">
  ![á„‘á…³á„…á…©á„ƒá…¥á†¨á„‰á…§á†« á„†á…©á„ƒá…³á„…á…© á„‡á…µá†¯á„ƒá…³ á„’á…¢á†»á„‹á…³á†¯ á„„á…¢](./assets/í”„ë¡œë•ì…˜_ëª¨ë“œë¡œ_ë¹Œë“œ_í–ˆì„_ë•Œ.png)
</MDXImageWrapper>

<br/>

webpackìœ¼ë¡œ buildí•  ë•Œ production modeë¥¼ ì‚¬ìš©í•´ì„œ 2.4MB â†’ 1.1MBë¡œ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ ì¤„ì–´ë“œëŠ” íš¨ê³¼ë¥¼ í™•ì¸í–ˆë‹¤. ì´ë¥¼ í†µí•´ webpack modeë¥¼ productionìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ìµœì í™” íš¨ê³¼ê°€ ìˆëŠ” ê²ƒê³¼ ë°°í¬ë¥¼ í• ë•Œ production ëª¨ë“œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œ ì•Œê²Œëë‹¤.

<br/>

## production ëª¨ë“œë¡œ ì‹¤í–‰ì‹œí‚¤ë©´ ë¬´ì—‡ì´ ë‹¬ë¼ì§ˆê¹Œ?

webpack ê³µì‹ë¬¸ì„œì˜ production ëª¨ë“œì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

<br/>

> `DefinePlugin`ì˜Â `process.env.NODE_ENV`ë¥¼Â `production`ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. ëª¨ë“ˆê³¼ ì²­í¬,Â `FlagDependencyUsagePlugin`,Â `FlagIncludedChunksPlugin`,Â `ModuleConcatenationPlugin`,Â `NoEmitOnErrorsPlugin`,Â `TerserPlugin`Â ë“±ì— ëŒ€í•´ ê²°ì •ì  ë§ê¸€ì´ë¦„(mangled name)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 

<br/>

mangled nameì´ ì •í™•íˆ ì–´ë–¤ ê°œë…ì¸ì§€ ëª¨ë¥´ê² ì§€ë§Œ(ì¶”í›„ì— ì¡°ì‚¬ í•„ìš”!!) ëª©ë¡ì— ëª…ì‹œëœ í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•œë‹¤ê³  ì¶”ì¸¡ì´ëœë‹¤.

<br/>

ì‹¤ì œë¡œ [ê¹€ì •í™˜ë‹˜ì˜ ì›¹íŒ©(ì‹¬í™”) ê²Œì‹œê¸€](https://jeonghwan-kim.github.io/series/2020/01/02/frontend-dev-env-webpack-intermediate.html#4-%EC%B5%9C%EC%A0%81%ED%99%94)ì—ì„œ production ëª¨ë“œë¡œ ë¹Œë“œë¥¼ í•  ë•Œ ì•„ë˜ì˜ í”ŒëŸ¬ê·¸ì¸ë“¤ì´ ì‚¬ìš©ëœë‹¤ê³  ëª…ì‹œë¼ ìˆë‹¤.

<br/>

- FlagDependencyUsagePlugin
- FlagIncludedChunksPlugin
- ModuleConcatenationPlugin
- NoEmitOnErrorsPlugin
- OccurrenceOrderPlugin
- SideEffectsFlagPlugin
- TerserPlugin

<br/>

í”ŒëŸ¬ê·¸ì¸ ëª©ë¡ì„ í™•ì¸í•œ í›„ `ë§Œì•½, í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ë“¤ì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ìµœì í™”ê°€ ì§„í–‰ë˜ì§€ ì•ŠëŠ” ê²ƒì¸ê°€?` ë¼ëŠ” ì˜ë¬¸ì´ ìƒê²¼ë‹¤. 

<br/>

> Webpack v5 comes with the latestÂ `terser-webpack-plugin`Â out of the box.
> 

<br/>

í•˜ì§€ë§Œ ìœ„ í”ŒëŸ¬ê·¸ì¸ ì¤‘ í•˜ë‚˜ì¸ [TerserPluginì˜ ê³µì‹ë¬¸ì„œ](https://webpack.js.org/plugins/terser-webpack-plugin/#getting-started)ë¥¼ ë³´ë©´ ìœ„ì™€ ê°™ì´ `webpack5 ë¶€í„°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì´ ê°™ì´ ì œê³µëœë‹¤.` ê³  ëª…ì‹œë¼ ìˆë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ í”ŒëŸ¬ê·¸ì¸ë“¤ë„ webpack5ì— ê¸°ë³¸ì ì¸ í”ŒëŸ¬ê·¸ì¸ ê¸°ëŠ¥ì´ ê°™ì´ ì œê³µë  ê²ƒìœ¼ë¡œ ì¶”ì¸¡ëœë‹¤. ë”°ë¼ì„œ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ë“¤ì´ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì§€ ì•Šì•„ë„ production ëª¨ë“œì—ì„œ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ ë“¤ì„ ì‚¬ìš©í•˜ì—¬ ìµœì í™”ê°€ ì§„í–‰ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤.

<br/>

ğŸ’¡TerserPluginì˜ ê²½ìš° ì¶”ê°€ì ì¸ ì˜µì…˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì¹˜í•´ì•¼í•œë‹¤.

ğŸ’¡TerserPluginì€ [terser](https://github.com/terser/terser)ë¥¼ ì´ìš©í•´ì„œ javascript íŒŒì¼ì„ minify/minimize í•œë‹¤.

<br/>

# optimization ì˜µì…˜

[optimization](https://webpack.js.org/configuration/optimization/)ì€ webpackì—ì„œ ìµœì í™”ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•œ ì˜µì…˜ì´ë‹¤.

<br/>

## optimization.minimize

optimization.minimize ì†ì„±ì— true ê°’ì„ ì£¼ë©´ webpackì€ [TerserPlugin](https://webpack.js.org/plugins/terser-webpack-plugin/) ë˜ëŠ” opmization.minimizerì— ëª…ì‹œëœ í”ŒëŸ¬ê·¸ì¸ë“¤ë¡œ ìµœì í™”ë¥¼ ì‹¤í–‰í•œë‹¤. ê¸°ë³¸ ê°’ì€ trueì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì†ì„±ì„ ë”°ë¡œ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ìµœì í™”ê°€ ì§„í–‰ëœë‹¤.

<br/>

<MDXImageWrapper caption="optimization.minimize á„Œá…¥á†¨á„‹á…­á†¼ á„’á…® bundle á„á…³á„€á…µ">
  ![optimization.minimize á„Œá…¥á†¨á„‹á…­á†¼ á„’á…® bundle á„á…³á„€á…µ](./assets/optimization.minimize_ì ìš©_í›„_bundle_í¬ê¸°.png)
</MDXImageWrapper>

ìœ„ ì‚¬ì§„ì— ë‚˜ì™”ë“¯ì´ minimizeë¥¼ ì ìš©í•˜ëŠ” ê²ƒ ë§Œìœ¼ë¡œ minimizeê°€ falseì¼ ë•Œë³´ë‹¤ bundle í¬ê¸°ê°€ 1.1MBì—ì„œ 269KBë¡œ ê°ì†Œí–ˆë‹¤.

<br/>

ì‹¤ì œë¡œ bundle.jsì˜ ì½”ë“œ ë¼ì¸ ìˆ˜ë¥¼ ë¹„êµí•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

- minimizeê°€ false ì¼ ë•Œ
    - ë¼ì¸ ìˆ˜: 10813ì¤„
    - ëŒ€ëµì ì¸ íŒŒì¼ ëª¨ìŠµ
        
        ```jsx
        /******/ (() => { // webpackBootstrap
        /******/ 	var __webpack_modules__ = ({
        
        /***/ 8617:
        /***/ (function(__unused_webpack_module, exports, __webpack_require__) {
        
        "use strict";
        
        var __assign = (this && this.__assign) || function () {
            __assign = Object.assign || function(t) {
                for (var s, i = 1, n = arguments.length; i < n; i++) {
                    s = arguments[i];
                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
                }
                return t;
            };
            return __assign.apply(this, arguments);
        };
        var __importDefault = (this && this.__importDefault) || function (mod) {
            return (mod && mod.__esModule) ? mod : { "default": mod };
        };
        Object.defineProperty(exports, "__esModule", ({ value: true }));
        exports.GiphyFetch = void 0;
        /* eslint-disable no-dupe-class-members */
        var js_util_1 = __webpack_require__(3859);
        var qs_1 = __importDefault(__webpack_require__(2431));
        var gif_1 = __webpack_require__(1073);
        var request_1 = __importDefault(__webpack_require__(9669));
        var getType = function (options) { return (options && options.type ? options.type : 'gifs'); };
        ```
        

<br/>

- minimizeê°€ trueì¼ ë•Œ
    - ë¼ì¸ ìˆ˜: 3ì¤„(í•˜ì§€ë§Œ, column ìˆ˜ê°€ 274976ê¹Œì§€ ì¦ê°€í–ˆë‹¤.)
    - ëŒ€ëµì ì¸ íŒŒì¼ ëª¨ìŠµ
        
        ```jsx
        /*! For license information please see bundle.js.LICENSE.txt */
        (()=>{var e={8617:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return...
        //# sourceMappingURL=bundle.js.map
        ```
        

<br/>

[TerserPluginì˜ ê³µì‹ ë¬¸ì„œ](https://github.com/terser/terser#cli-mangling-property-names---mangle-props)ë¥¼ í™•ì¸í•´ë³´ë©´ ìœ„ì™€ ê°™ì€ javascript íŒŒì¼ì˜ ì••ì¶•ì€ TerserPluginì´ ìˆ˜í–‰í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ë”°ë¼ì„œ optimization.minimizeë¥¼ falseë¡œ ì ìš©í•˜ë©´ TerserPluginì´ ì ìš©ë˜ì§€ ì•Šì•„ javascript ì½”ë“œì˜ ì••ì¶•ì´ ì§„í–‰ë˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ì¶”ì¸¡í•œë‹¤.

## optimization.minimizer

optimization.minimizerì—ëŠ” ìµœì í™”ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ëª…ì‹œí•˜ëŠ” ì†ì„±ì´ë‹¤.

<br/>

minimizer ì†ì„±ìœ¼ë¡œ ìµœì í™”í•  ë•Œ ì ìš©ë˜ëŠ” pluginì„ ì¬ì •ì˜ í•  ë•Œ, â€˜â€¦â€™ì„ ê°™ì´ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ì— defaultë¡œ ì ìš©ë˜ë˜ pluginë„ ê°™ì´ ì ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
optimization: {
    minimizer: ['...', new ExamplePlugin()]
  }
```

# devtool ì˜µì…˜

[devtool](https://webpack.kr/configuration/devtool/)ì€ ì†ŒìŠ¤ë§µ ìƒì„± ì—¬ë¶€ì™€ ë°©ë²•ì„ ì œì–´í•˜ëŠ” ì˜µì…˜ì´ë‹¤. 

## ì†ŒìŠ¤ë§µ(source map)ì´ë€?

ì†ŒìŠ¤ë§µ(sourcemap)ì€ minimizeë˜ê³  uglifyê°€ ì¼ì–´ë‚œ íŒŒì¼ì„ ë””ë²„ê¹…í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

<br/>

## ì†ŒìŠ¤ë§µì„ production modeë¡œ buildí•  ë•Œ í¬í•¨ì‹œì¼œì•¼ í• ê¹Œ?

ë‹µì€ â€˜**í¬í•¨ì‹œí‚¤ë©´ ì•ˆëœë‹¤.**â€™ ì´ë‹¤. ì†ŒìŠ¤ë§µì€ ë””ë²„ê¹…ì„ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ”ë°, ì†ŒìŠ¤ë§µì„ ê°™ì´ ì œê³µí•˜ë©´ ê°œë°œìê°€ ë‚œë…í™” ì‹œí‚¨ ì½”ë“œê°€ í•´ì„ë  ì—¬ì§€ê°€ ìˆë‹¤. ë”°ë¼ì„œ productionì„ ì œê³µí•  ë•ŒëŠ” ì†ŒìŠ¤ë§µì„ í¬í•¨ì‹œí‚¤ë©´ ì•ˆëœë‹¤.

<br/>

ì†ŒìŠ¤ë§µ ìƒì„±í•˜ë©´ ì›ë³¸ íŒŒì¼ê³¼ ë¹Œë“œí•œ íŒŒì¼ì„ ì—°ê²°í•´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ”ë°, ì´ëŠ” ë¹Œë“œëœ íŒŒì¼ì„ í¬ê¸°ë¥¼ ì•½ê°„ ì¦ê°€ì‹œí‚¤ëŠ” ê²ƒìœ¼ë¡œ ì¶”ì¸¡í•œë‹¤. ì‹¤ì œë¡œ ì†ŒìŠ¤ë§µ ìƒì„± ì—¬ë¶€ì— ë”°ë¼ ë¹Œë“œ íŒŒì¼ì— í¬ê¸°ê°€ ë‹¬ë¼ì§€ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤.

ì•„ë˜ì˜ ì‚¬ì§„ì€ ì™¼ìª½ë¶€í„° ì†ŒìŠ¤ë§µ ìƒì„± ì „ main.js í¬ê¸°, ì†ŒìŠ¤ë§µ ìƒì„± í›„ main.js í¬ê¸°ì´ë‹¤. ì†ŒìŠ¤ë§µì„ ì²¨ë¶€í•˜ë©´ ë¹Œë“œ íŒŒì¼ì˜ í¬ê¸°ê°€ 161KBì—ì„œ 166KBë¡œ ì¦ê°€í–ˆë‹¤.

<br/>

<MDXImageWrapper caption="devtool false dist á„‰á…¡á„Œá…µá†«">
  ![devtool false dist á„‰á…¡á„Œá…µá†«](./assets/devtool_false_dist_ì‚¬ì§„.png)
</MDXImageWrapper>

<MDXImageWrapper caption="devtool source-map dist á„‰á…¡á„Œá…µá†«">
  ![devtool source-map dist á„‰á…¡á„Œá…µá†«](./assets/devtool_source-map_dist_ì‚¬ì§„.png)
</MDXImageWrapper>

<br/>

## ì„¤ì • ì˜ˆì‹œ

ì†ŒìŠ¤ë§µì„ production modeì—ì„œë§Œ ì œê±°í•˜ëŠ” ì†ì„±ì€ ì•„ë˜ì²˜ëŸ¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```jsx
// webpack.config.js
const isProd = process.env.NODE_ENV === 'production';

module.exports = {
  ...
	devtool: isProd ? false : 'source-map',
	...
};
```

<br/>

# ì°¸ê³  ìë£Œ

[Concepts | ì›¹íŒ©](https://webpack.kr/concepts/)

[Optimization | ì›¹íŒ©](https://webpack.kr/configuration/optimization/)

[í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ì˜ ì´í•´: ì›¹íŒ©(ì‹¬í™”)](https://jeonghwan-kim.github.io/series/2020/01/02/frontend-dev-env-webpack-intermediate.html#4-%EC%B5%9C%EC%A0%81%ED%99%94)